<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
<style type="text/css">
.progress{position: relative;width: 100%;}
.progress_bg{height: 10px; border-radius: 5px; overflow: hidden;background-color:#f2f2f2;}
.progress_bar{background: #FF5500; width: 0; height: 10px; border-radius: 5px;}
.progress_btn{width: 20px; height: 20px; border-radius:50%; position: absolute;background:#FF5500; 
left: 0px; margin-left: 0px; top:-5px; cursor: pointer;box-sizing:border-box;}
.progress_btn:hover{border-color:#F7B824;}
</style>
</head>
<body>
    <div class="progress">
        <div class="progress_bg">
            <div class="progress_bar"></div>
        </div>
        <div class="progress_btn"></div>
        <div class="text">30%</div>
    </div>
    <script type="text/javascript">
        var that =this;
        var x1,y1,oldTime,newTime,olfLeft,newLeft;
        var width = document.querySelector('.progress').offsetWidth;
        olfLeft=width*0.1;
        document.querySelector('.progress_bar').style.width=olfLeft+"px";
        document.querySelector('.progress_btn').style.left=(olfLeft-(olfLeft>(width-10)?10:5))+"px";
        var touch = document.querySelector('.progress_btn');
        touch.addEventListener("touchstart",handleStart,false); 
        touch.addEventListener("touchmove",handleMove,false); 
        touch.addEventListener("touchend",handleEnd,false); 
       console.log(olfLeft)
        var aaa=100*0.1;
        function handleStart(e){
            e.preventDefault();
            var touches = e.changedTouches;
            x1 = touches[0].pageX;
            y1 = touches[0].pageY;
        }
        function handleMove(e){
            e.preventDefault();
            var x2 = e.changedTouches[0].pageX;
            var y2 = e.changedTouches[0].pageY;
            newLeft = x2-x1;
            nowLeft = olfLeft+newLeft;
            var nowLeft1=width*0.1;
            if(nowLeft<nowLeft1){
                nowLeft = nowLeft1;
            }
            if(nowLeft>width){
                nowLeft = width;
            }
            document.querySelector('.progress_bar').style.width=nowLeft+"px";
            document.querySelector('.progress_btn').style.left=(nowLeft-(nowLeft>(width-10)?10:5))+"px";
            var per = (nowLeft/width).toFixed(2);
            console.log(nowLeft)
            console.log(width)
            console.log(per)
            document.querySelector('.text').innerHTML=parseInt(per*100)+'%'
        }
        function handleEnd(e){
            touch.removeEventListener("touchmove",handleEnd,false);
        }
    </script>
</body>
</html>